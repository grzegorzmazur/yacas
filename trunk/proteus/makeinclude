


all : yacdefines.h proteus

distclean:  clean
	-rm -f proteus

depend :
	gcc -MM *.cpp $(INCS) > depend.dep

clean :
	-rm -rf *.o *~ *.a core *.zip 

yacdefines.h: yacasconf
	yacas -pc yacasconf


PROTEUS_OBJS = tabs.o editor.o HelpView.o FltkConsole.o grapher.o FltkHintWindow.o 

proteus   : $(PROTEUS_OBJS)  
	$(CXX) $(PROTEUS_OBJS) -o proteus $(CXXFLAGS) $(LIBS) 
	$(POSTBUILD) $@ /usr/local/include/FL/mac.r

.cpp.o:
	$(CXX) $(CXXFLAGS) $(DEFINES) $(INCS) -c $*.cpp -o $*.o

.cxx.o:
	$(CXX) $(CXXFLAGS) $(DEFINES) $(INCS) -c $*.cxx -o $*.o

# Stuff for automatic generation of Yacas books
%.chapt: %.chapt.txt
	perl $(INSTALL_DIR)/share/yacas/manmake/txt2yacasdoc.pl < $< > $@

%.man: %.man.txt
	perl $(INSTALL_DIR)/share/yacas/manmake/txt2yacasdoc.pl < $< > $@

%.book: %.book.txt
	perl $(INSTALL_DIR)/share/yacas/manmake/txt2yacasdoc.pl < $< > $@

%.book.tex: %.book
	sh $(INSTALL_DIR)/share/yacas/manmake/book2TeX.sh -run yacas $< $@

%.dvi: %.tex
	latex $< > /dev/null
	latex $< > /dev/null
	latex $< > /dev/null

%.ps: %.dvi
	dvips -q -o $@ $<
	@echo Documentation created: $*.ps

%.pdf: %.dvi
	pdflatex $* > /dev/null
	@echo Documentation created: $*.pdf

PROTEUSMANUALCHAPTERS = fltkgraphstub.man 

texdocs: fltkgraphstub.man proteusmanual.book proteusmanual.book.tex proteusmanual.book.pdf 

proteusmanual.book.tex: $(PROTEUSMANUALCHAPTERS) proteusmanual.book 

fltkgraphstub.cc: fltkgraph.stub
	yacas -pc fltkgraph.stub

include depend.dep





