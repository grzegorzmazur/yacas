// Testing plugins does only work when everything is already installed

If(MakeFunctionPlugin(),
  [
    // test Dll'Load and Dll'Unload
    Dll'Load("example");

    Verify(Contains(Dll'Enumerate(), "example"), True);
    Verify(AddTwoIntegers(1,2), 3);
    Verify(AddTwoDoubles(1.5,2.7), 4.2);
    mybla := CreateBla(5,7);
    Verify(BlaGetA(mybla), 5);
    BlaSetA(mybla, -2);
    Verify(BlaGetA(mybla), -2);
    Dll'Unload("example");

    Verify(AddTwoIntegers(1,2), Hold(AddTwoIntegers(1,2)));
    Verify(Contains(Dll'Enumerate(), "example"), False);
  ],
	Echo("MakeFunctionPlugin unavailable, so not tested.")
);


// test MakeFunctionPlugin
If(MakeFunctionPlugin(),
	[
		Retract("f",1);
		Retract("f1",1);
		f(x) := Cos( (Abs(Pi/x))^1.5 );
		MakeFunctionPlugin("f1", f(x));
		Verify(f1(0), Undefined);
		Verify(f1(1), 0.755187);
		Verify(f1(-1), 0.755187);
	],
	Echo("MakeFunctionPlugin unavailable, so not tested.")
);
