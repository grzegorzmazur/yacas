## Makefile.am -- Process this file with automake to produce Makefile.in

# Yacas test suite:
# The scripts in $(TESTFILES) are run through yacas.
# The actual testing is done by "test-yacas", which is constructed below
# Special case: the test file "webster.yts" is extracted from the documentation

TESTFILES = arithmetic.yts c_tex_form.yts calculus.yts canprove.yts \
	comments.yts complex.yts deriv.yts integrate.yts linalg.yts lists.yts \
	logic_simplify_test.yts numerics.yts orthopoly.yts poly.yts predicates.yts \
	programming.yts radsimp.yts regress.yts simplify.yts solve.yts sums.yts sturm.yts \
	tensors.yts multivar.yts numbers.yts io.yts

EXTRA_DIST = $(TESTFILES)

SPECIALTESTFILES = ../manualmaker/wester-1994.ys

## This is the program to run 
TESTS = test-yacas

## To run the newly-built yacas:
## Note: yacas needs the slash at the end
OURYACAS = ../src/yacas -pc --rootdir $(top_srcdir)/scripts/:../scripts/ 

test-yacas: Makefile
	@echo 'Making test script "$@"'
	@echo '#! $(SHELL)' > $@
	@echo >> $@
	@echo '# This file is generated by a script' >> $@
	@for file in $(TESTFILES) $(SPECIALTESTFILES); do \
	   echo echo '$@: Running ' $$file >> $@; \
	   if test -f $$file; then d=.; else d=$(srcdir); fi; \
	   echo $(OURYACAS) $$d/$$file >> $@; \
	 done
	@chmod u+x $@
