<html>
  <head>
    <link rel="stylesheet" href="yacas.css" TYPE="text/css" MEDIA="screen">
    <script type="text/javascript" src="datahub.js"></script>
    <script type="text/javascript" src="yacas.js"></script>
    <script type="text/javascript" src="journal.js"></script>

    <title>Yacas journal</title>
  </head>
  <body>
    <h1>Fun with derivatives part 1: defining the concept of a derivative in <i>Yacas</i></h1>
    <p>
      This is the first article in a series of articles on doing calculations involving derivatives in <i>Yacas</i>.
      Defining a function that can determine the derivative of a function has been a classic example of something
      you can do easily in languages similar to <i>Yacas</i>, and provides a good starting point to show off
      the capabilities <i>Yacas</i> has with respect to defining transformation rules.
    </p>
    <p>
      You need surprisingly few lines of code to actually define the operation of taking a derivative. We will develop 
      the code that can be used in <i>Yacas</i> in this article for instructional purposes. <i>Yacas</i> naturally already
      knows how to take the derivative of a function. One can take a derivative through the <span class="yacasExpression">D</span> function.
      But it is still a good example that demonstrates how to use transformation rules in <i>Yacas</i>, as very few lines
      of code are needed and most people readily know the transformation rules by heart (the transformation rules lend themselves
      quite well to implementation in a computer program). It is also an example of a function
      where the answer is not a number but a more complex thing, another function.
    </p>
    <p>
      We will define the function dd, which will take two arguments. The first is the variable, the second the function 
      to take the derivative off (with respect to the variable given as first argument).
    </p>
    <p>
      First we can tell the system that taking the derivative of a variable with respect to itself (eg. taking the derivative of
      <span class="yacasExpression">x</span> with respect to <span class="yacasExpression">x</span>) is one:
<span class="yacasCodeSnippet">
dd(_x,_x) &lt;-- 1;
</span>
      The pattern on the left side has two matchable places named <span class="yacasExpression">_x</span>. 
      This instructs <i>Yacas</i> to check that they are the same.
    </p>
    <p>
      Next we tell the system that if you take a derivative of a function with respect to a variable that that function does not depend
      on, the result is zero. Taking the derivative of say <span class="yacasExpression">f(y)</span> with respect to 
      <span class="yacasExpression">x</span> would yield the result zero, assuming that <span class="yacasExpression">f(y)</span> does
      not depend on <span class="yacasExpression">x</span>.
<span class="yacasCodeSnippet">
dd(_x,y_IsFreeOf(x)) &lt;-- 0;
</span>
      Note the construct <span class="yacasExpression">y_IsFreeOf(x)</span>. <i>Yacas</i> internally transforms that construct to 
      mean <span class="yacasExpression">IsFreeOf(x,y)</span>. So this pattern matches only
      if the expression to take the derivative off does not depend on the variable to take the derivative with respect of. The result is 
      zero in that case.
    </p>
    <p>
      Taking derivatives is a linear operation. The derivative of an expression that adds two expressions is the derivative of the one plus
      the derivative of the other. This is summarized in the following rules:
<span class="yacasCodeSnippet">
dd(_x,_a + _b)  &lt;-- dd(x,a)+dd(x,b);
dd(_x,_a - _b)  &lt;-- dd(x,a)-dd(x,b);
dd(_x,   - _b)  &lt;--        -dd(x,b);
</span>
    </p>
    <p>
      Taking the derivative of a function to the power of a constant is also a well-known transform. Taking the derivative of 
      <span class="yacasExpression">x^n</span> with respect to
      <span class="yacasExpression">x</span> yields <span class="yacasExpression">n*x^(n-1)</span>. This can be generalized to 
      taking the derivative of <span class="yacasExpression">f(x)^n</span> by applying the chain rule: 
      <span class="yacasExpression">d(x,f(g(x)))</span> is <span class="yacasExpression">d(x,g)*d(g,f)</span>,
      symbolically. We will embed the chain rule within the transformation rules:
<span class="yacasCodeSnippet">
dd(_x,_y ^ z_IsFreeOf(x)) &lt;-- dd(x,y)*z*y^(z-1);
</span>
    </p>
    <p>
      Taking the derivative of an expression that consists of one expression multiplied by the other also has a commonly known transformation rule:
<span class="yacasCodeSnippet">
dd(_x,_a * _b)  &lt;-- a*dd(x,b)+dd(x,a)*b;
</span>
      And so does division:
<span class="yacasCodeSnippet">
dd(x,_y / _z) &lt;-- (z*dd(x,y)-y*dd(x,z))/z^2;
</span>
    </p>
    <p>
      Finally we add the derivatives of a few well-known analytic functions:
<span class="yacasCodeSnippet">
dd(_x,Sin(_y)) &lt;--  dd(x,y)*Cos(y);
dd(_x,Cos(_y)) &lt;-- -dd(x,y)*Sin(y);
dd(_x,Exp(_y)) &lt;--  dd(x,y)*Exp(y);
dd(_x,Sqrt(_y)) &lt;-- dd(x,y)/(2*Sqrt(y));
</span>
      This list can be expanded further of course.
    </p>
    <p>
      For convenience we also defined a function <span class="yacasExpression">dd(x,n,f)</span>, which takes the derivative 
      of <span class="yacasExpression">f</span> with respect to <span class="yacasExpression">x</span> 
      <span class="yacasExpression">n</span> times. The function calls itself
      <span class="yacasExpression">n</span> times recursively until <span class="yacasExpression">n</span> is zero (in which 
      case it returns the expression unchanged).
<span class="yacasCodeSnippet">
dd(_x,0,_f) <-- f;
dd(_x,n_IsPositiveInteger,_f) <-- dd(x,n-1,dd(x,f));
</span>
    </p>
    <p>
      If you click on the button labeled "Try out" above this text you will be directed to the <i>Yacas</i> calculation center.
      Here you can try out the function <span class="yacasExpression">dd(x,f)</span> that is developed here. Clicking on the 
      button labeled "Example" will result in a pre-determined example being typed in for you. The "Edit" button allows you to
      edit the code, modifying it before re-running the code.
    </p>

    <p>
      There are sometimes different ways of representing the same result. Compare for example the result of calculating <span class="yacasExpression">dd(x,n,Sqrt(x))</span>
      with <span class="yacasExpression">dd(x,n,x^0.5)</span> (we use 0.5 here and not (1/2), because <i>Yacas</i> does some
      standard simplifications, one of which is converting x^(1/2) to Sqrt(x), something we don't want for this example). 
      The length of the one result is much longer than the other, although mathematically they are identical. 
    </p>

    <script type="text/javascript">
      addDatahub();
    </script>
  </body>
</html>

